{
  "type": "bonjson-test",
  "version": "1.0.0",
  "//": "Tests with various valid options",
  "tests": [
    {
      "//": "Boolean option allow_nul",
      "name": "option_allow_nul",
      "type": "roundtrip",
      "input": "hello\u0000world",
      "options": {"allow_nul": true}
    },
    {
      "//": "String option nan_infinity_behavior",
      "name": "option_nan_infinity_behavior",
      "type": "roundtrip",
      "input": {"$number": "NaN"},
      "options": {"nan_infinity_behavior": "allow"}
    },
    {
      "//": "String option duplicate_key - keep_first",
      "name": "option_duplicate_key",
      "type": "roundtrip",
      "input": {"a": 1},
      "options": {"duplicate_key": "keep_first"}
    },
    {
      "//": "String option invalid_utf8 - replace",
      "name": "option_invalid_utf8",
      "type": "roundtrip",
      "input": "test",
      "options": {"invalid_utf8": "replace"}
    },
    {
      "//": "Integer option max_depth",
      "name": "option_max_depth",
      "type": "roundtrip",
      "input": [[1]],
      "options": {"max_depth": 10}
    },
    {
      "//": "Integer option max_string_length",
      "name": "option_max_string_length",
      "type": "roundtrip",
      "input": "short",
      "options": {"max_string_length": 1000}
    },
    {
      "//": "Integer option max_chunks",
      "name": "option_max_chunks",
      "type": "roundtrip",
      "input": "test",
      "options": {"max_chunks": 100}
    },
    {
      "//": "Integer option max_container_size",
      "name": "option_max_container_size",
      "type": "roundtrip",
      "input": [1, 2, 3],
      "options": {"max_container_size": 100}
    },
    {
      "//": "Integer option max_document_size",
      "name": "option_max_document_size",
      "type": "roundtrip",
      "input": "test",
      "options": {"max_document_size": 10000}
    },
    {
      "//": "Multiple options combined",
      "name": "option_multiple",
      "type": "roundtrip",
      "input": {"key": "value"},
      "options": {
        "max_depth": 10,
        "max_string_length": 1000
      }
    },
    {
      "//": "max_depth: 1 allows one level of container nesting; nested containers with content exceed it",
      "name": "option_max_depth_exceeded",
      "type": "encode_error",
      "input": [[1]],
      "options": {"max_depth": 1},
      "expected_error": "max_depth_exceeded"
    }
  ]
}
