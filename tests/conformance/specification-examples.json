{
  "type": "bonjson-test",
  "version": "1.0.0",
  "//": "Examples taken directly from the BONJSON specification document",
  "tests": [
    {
      "//": "Short String examples from spec",
      "name": "spec_short_string_empty",
      "type": "encode",
      "input": "",
      "expected_bytes": "d0"
    },
    {
      "name": "spec_short_string_a",
      "type": "encode",
      "input": "A",
      "expected_bytes": "d1 41"
    },
    {
      "//": "Japanese 'ohayou' (good morning)",
      "name": "spec_short_string_japanese",
      "type": "encode",
      "input": "おはよう",
      "expected_bytes": "dc e3 81 8a e3 81 af e3 82 88 e3 81 86"
    },
    {
      "name": "spec_short_string_15bytes",
      "type": "encode",
      "input": "15 byte string!",
      "expected_bytes": "df 31 35 20 62 79 74 65 20 73 74 72 69 6e 67 21"
    },
    {
      "//": "Long String examples from spec",
      "name": "spec_long_string_empty",
      "type": "decode",
      "input_bytes": "ff ff",
      "expected_value": ""
    },
    {
      "name": "spec_long_string_astring",
      "type": "decode",
      "input_bytes": "ff 61 20 73 74 72 69 6e 67 ff",
      "expected_value": "a string"
    },
    {
      "//": "64 Z's (length field = 0x01 0x02)",
      "name": "spec_long_string_64chars",
      "type": "encode",
      "input": "ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ",
      "expected_bytes": "ff 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a 5a ff"
    },
    {
      "//": "Small Integer examples from spec (value = type_code - 100)",
      "name": "spec_smallint_100",
      "type": "encode",
      "input": 100,
      "expected_bytes": "c8"
    },
    {
      "name": "spec_smallint_5",
      "type": "encode",
      "input": 5,
      "expected_bytes": "69"
    },
    {
      "name": "spec_smallint_0",
      "type": "encode",
      "input": 0,
      "expected_bytes": "64"
    },
    {
      "name": "spec_smallint_neg60",
      "type": "encode",
      "input": -60,
      "expected_bytes": "28"
    },
    {
      "name": "spec_smallint_neg100",
      "type": "encode",
      "input": -100,
      "expected_bytes": "00"
    },
    {
      "//": "Integer examples from spec - 180 can be uint8 or sint16",
      "name": "spec_int_180",
      "type": "roundtrip",
      "input": 180
    },
    {
      "//": "Decode test: 180 encoded as uint8 (spec example)",
      "name": "decode_spec_int_180_uint8",
      "type": "decode",
      "input_bytes": "e0 b4",
      "expected_value": 180
    },
    {
      "name": "spec_int_neg1000",
      "type": "encode",
      "input": -1000,
      "expected_bytes": "e5 18 fc"
    },
    {
      "//": "32768 can be uint16 or sint24",
      "name": "spec_int_32768",
      "type": "roundtrip",
      "input": 32768
    },
    {
      "//": "Decode test: 32768 encoded as uint16 (spec example)",
      "name": "decode_spec_int_32768_uint16",
      "type": "decode",
      "input_bytes": "e1 00 80",
      "expected_value": 32768
    },
    {
      "//": "0x123456789abc",
      "name": "spec_int_large",
      "type": "encode",
      "input": 20015998343868,
      "expected_bytes": "e7 bc 9a 78 56 34 12 00 00"
    },
    {
      "name": "spec_int_min_int64",
      "type": "encode",
      "input": -9223372036854775808,
      "expected_bytes": "e7 00 00 00 00 00 00 00 80"
    },
    {
      "//": "0xded0d0d0dedadada",
      "name": "spec_uint64_example",
      "type": "encode",
      "input": {
        "$number": "16055562267086478042"
      },
      "expected_bytes": "e3 da da da de d0 d0 d0 de"
    },
    {
      "//": "Float32 example from spec: 1.125 fits in float32",
      "name": "spec_float32_1_125",
      "type": "encode",
      "input": 1.125,
      "expected_bytes": "cb 00 00 90 3f"
    },
    {
      "//": "Float32 example from spec: 0x1.3f7p5",
      "name": "spec_float32",
      "type": "decode",
      "input_bytes": "cb 00 b8 1f 42",
      "expected_value": {
        "$number": "0x1.3f7p5"
      }
    },
    {
      "//": "Float64 example from spec",
      "name": "spec_float64",
      "type": "encode",
      "input": 1.234,
      "expected_bytes": "cc 58 39 b4 c8 76 be f3 3f"
    },
    {
      "//": "BigNumber decoding: 1.5 = 15 * 10^-1. exp=zigzag(-1)=0x01, signed_length=+1→zigzag(1)=0x02, magnitude=15=0x0F",
      "name": "spec_bignumber_1_5",
      "type": "decode",
      "input_bytes": "ca 01 02 0f",
      "expected_value": {
        "$number": "1.5"
      }
    },
    {
      "//": "Negative zero bignum: not representable (signed_length=0 is always positive zero; use IEEE754 float -0.0 instead)",
      "name": "spec_bignumber_neg_zero",
      "type": "decode",
      "input_bytes": "ca 00 00",
      "expected_value": 0,
      "//note": "signed_length=0 always means positive zero; negative zero uses float encoding"
    },
    {
      "//": "Array example from spec (3 elements → count=0x0c)",
      "name": "spec_array",
      "type": "encode",
      "input": [
        "a",
        1,
        null
      ],
      "expected_bytes": "fc d1 61 65 cd fe"
    },
    {
      "//": "Object example from spec (roundtrip since key order is unspecified)",
      "name": "spec_object",
      "type": "roundtrip",
      "input": {
        "b": 0,
        "test": "x"
      }
    },
    {
      "//": "Boolean examples from spec",
      "name": "spec_bool_false",
      "type": "encode",
      "input": false,
      "expected_bytes": "ce"
    },
    {
      "name": "spec_bool_true",
      "type": "encode",
      "input": true,
      "expected_bytes": "cf"
    },
    {
      "//": "Null example from spec",
      "name": "spec_null",
      "type": "encode",
      "input": null,
      "expected_bytes": "cd"
    },
    {
      "//": "Full example from spec (roundtrip since key order is unspecified)",
      "name": "spec_full_example",
      "type": "roundtrip",
      "input": {
        "number": 50,
        "null": null,
        "boolean": true,
        "array": [
          "x",
          1000,
          -1.25
        ],
        "object": {
          "negative number": -100,
          "long string": "1234567890123456789012345678901234567890"
        }
      }
    },
    {
      "//": "Chunked long string from spec: 'a string' in 3 chunks (1 byte, 4 bytes, 3 bytes)",
      "//note": "Chunk1: len=1,cont=1 → 0x06, data='a'. Chunk2: len=4,cont=1 → 0x12, data=' str'. Chunk3: len=3,cont=0 → 0x0c, data='ing'",
      "name": "spec_long_string_chunked",
      "type": "decode",
      "input_bytes": "ff 61 20 73 74 72 69 6e 67 ff",
      "expected_value": "a string"
    },
    {
      "//": "Chunked array from spec: ['a', 1, null] in 2 chunks (2 elements, then 1 element)",
      "//note": "Chunk1: count=2,cont=1 → 0x0a. Chunk2: count=1,cont=0 → 0x04",
      "name": "spec_array_chunked",
      "type": "decode",
      "input_bytes": "fc d1 61 65 cd fe",
      "expected_value": [
        "a",
        1,
        null
      ]
    },
    {
      "//": "BigNumber from spec: large value requiring arbitrary precision",
      "name": "spec_bignumber_large_hex",
      "type": "roundtrip",
      "input": {
        "$number": "4701378187390224568320"
      },
      "requires": [
        "arbitrary_precision_bignumber"
      ]
    }
  ]
}
