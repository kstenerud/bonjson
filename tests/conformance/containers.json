{
  "type": "bonjson-test",
  "version": "1.0.0",
  "//": "Container (array and object) encoding tests",
  "tests": [
    {
      "//": "Array with different value types (3 elements)",
      "name": "array_with_string_int_null",
      "type": "encode",
      "input": [
        "a",
        1,
        null
      ],
      "expected_bytes": "fc d1 61 65 cd fe"
    },
    {
      "//": "Nested empty arrays",
      "name": "array_nested_empty",
      "type": "encode",
      "input": [
        []
      ],
      "expected_bytes": "fc fc fe fe"
    },
    {
      "//": "Array with nested object",
      "name": "array_with_object",
      "type": "encode",
      "input": [
        {
          "a": 1
        }
      ],
      "expected_bytes": "fc fd d1 61 65 fe fe"
    },
    {
      "//": "Object with integer value",
      "name": "object_with_int",
      "type": "encode",
      "input": {
        "a": 1
      },
      "expected_bytes": "fd d1 61 65 fe"
    },
    {
      "//": "Object with negative small int value",
      "name": "object_with_neg_int",
      "type": "encode",
      "input": {
        "a": -1
      },
      "expected_bytes": "fd d1 61 63 fe"
    },
    {
      "//": "Object with larger int value (requires int16)",
      "name": "object_with_int16",
      "type": "encode",
      "input": {
        "a": 1000
      },
      "expected_bytes": "fd d1 61 e5 e8 03 fe"
    },
    {
      "//": "Object with int64 value",
      "name": "object_with_int64",
      "type": "encode",
      "input": {
        "a": 1152921504606846976
      },
      "expected_bytes": "fd d1 61 e7 00 00 00 00 00 00 00 10 fe"
    },
    {
      "//": "Object with negative int64 value",
      "name": "object_with_neg_int64",
      "type": "encode",
      "input": {
        "a": -1152921504606846976
      },
      "expected_bytes": "fd d1 61 e7 00 00 00 00 00 00 00 f0 fe"
    },
    {
      "//": "Object with float32 value (1.25 fits in float32)",
      "name": "object_with_float32",
      "type": "encode",
      "input": {
        "a": 1.25
      },
      "expected_bytes": "fd d1 61 cb 00 00 a0 3f fe"
    },
    {
      "//": "Object with float64 value",
      "name": "object_with_float64",
      "type": "encode",
      "input": {
        "a": -5.923441e-50
      },
      "expected_bytes": "fd d1 61 cc 35 3c ce 81 87 29 b6 b5 fe"
    },
    {
      "//": "Object with string value",
      "name": "object_with_string",
      "type": "encode",
      "input": {
        "a": "b"
      },
      "expected_bytes": "fd d1 61 d1 62 fe"
    },
    {
      "//": "Object with boolean false value",
      "name": "object_with_false",
      "type": "encode",
      "input": {
        "a": false
      },
      "expected_bytes": "fd d1 61 ce fe"
    },
    {
      "//": "Object with null value",
      "name": "object_with_null",
      "type": "encode",
      "input": {
        "a": null
      },
      "expected_bytes": "fd d1 61 cd fe"
    },
    {
      "//": "Object with nested empty object value",
      "name": "object_with_nested_object",
      "type": "encode",
      "input": {
        "a": {}
      },
      "expected_bytes": "fd d1 61 fd fe fe"
    },
    {
      "//": "Object with nested empty array value",
      "name": "object_with_nested_array",
      "type": "encode",
      "input": {
        "a": []
      },
      "expected_bytes": "fd d1 61 fc fe fe"
    },
    {
      "//": "Array with multiple element types (3 elements)",
      "name": "array_varied_elements",
      "type": "encode",
      "input": [
        "a",
        -1,
        "z"
      ],
      "expected_bytes": "fc d1 61 63 d1 7a fe"
    },
    {
      "//": "Array with larger integers (3 elements)",
      "name": "array_with_int16",
      "type": "encode",
      "input": [
        "a",
        1000,
        "z"
      ],
      "expected_bytes": "fc d1 61 e5 e8 03 d1 7a fe"
    },
    {
      "//": "Complex nested structure (roundtrip since key order is unspecified)",
      "name": "complex_nested_structure",
      "type": "roundtrip",
      "input": {
        "number": 50,
        "null": null,
        "boolean": true,
        "array": [
          "x",
          1000,
          -1.25
        ],
        "object": {
          "negative number": -100,
          "long string": "1234567890123456789012345678901234567890"
        }
      }
    },
    {
      "//": "Round-trip tests",
      "name": "roundtrip_nested_arrays",
      "type": "roundtrip",
      "input": [
        [
          1,
          2
        ],
        [
          3,
          4
        ]
      ]
    },
    {
      "name": "roundtrip_nested_objects",
      "type": "roundtrip",
      "input": {
        "outer": {
          "inner": 42
        }
      }
    },
    {
      "name": "roundtrip_mixed_nesting",
      "type": "roundtrip",
      "input": {
        "array": [
          1,
          {
            "nested": true
          }
        ],
        "value": null
      }
    },
    {
      "name": "roundtrip_deep_nesting",
      "type": "roundtrip",
      "input": {
        "a": {
          "b": {
            "c": {
              "d": {
                "e": 5
              }
            }
          }
        }
      }
    },
    {
      "//": "=== Object key edge cases ===",
      "name": "object_empty_string_key",
      "type": "roundtrip",
      "input": {
        "": 1
      }
    },
    {
      "//": "Empty string key with complex value",
      "name": "object_empty_string_key_array_value",
      "type": "roundtrip",
      "input": {
        "": [
          1,
          2,
          3
        ]
      }
    },
    {
      "//": "Long string key (16+ bytes uses long string encoding)",
      "name": "object_long_string_key",
      "type": "roundtrip",
      "input": {
        "this is a long key": 42
      }
    },
    {
      "//": "Very long key (32 bytes)",
      "name": "object_very_long_string_key",
      "type": "roundtrip",
      "input": {
        "12345678901234567890123456789012": "value"
      }
    },
    {
      "//": "Unicode object key - Japanese",
      "name": "object_unicode_key_japanese",
      "type": "roundtrip",
      "input": {
        "Êó•Êú¨Ë™û": "Japanese"
      }
    },
    {
      "//": "Unicode object key - Emoji",
      "name": "object_unicode_key_emoji",
      "type": "roundtrip",
      "input": {
        "üòÄ": "smiley"
      }
    },
    {
      "//": "Unicode object key - Mixed",
      "name": "object_unicode_key_mixed",
      "type": "roundtrip",
      "input": {
        "Hello ‰∏ñÁïå üåç": "mixed"
      }
    },
    {
      "//": "Multiple objects with various key types",
      "name": "object_mixed_key_types",
      "type": "roundtrip",
      "input": {
        "": 0,
        "a": 1,
        "this is a long key name": 2,
        "Êó•Êú¨": 3
      }
    },
    {
      "//": "Object key that looks like a number",
      "name": "object_numeric_string_key",
      "type": "roundtrip",
      "input": {
        "123": "numeric looking key"
      }
    },
    {
      "//": "Object key with spaces",
      "name": "object_key_with_spaces",
      "type": "roundtrip",
      "input": {
        "key with spaces": "value"
      }
    },
    {
      "//": "Nested objects with unicode keys",
      "name": "object_nested_unicode_keys",
      "type": "roundtrip",
      "input": {
        "Êó•Êú¨": {
          "Ë™û": {
            "value": 42
          }
        }
      }
    },
    {
      "//": "=== Empty container nesting tests ===",
      "//note": "Various patterns of nested empty containers"
    },
    {
      "//": "Array of empty arrays",
      "name": "array_of_empty_arrays",
      "type": "roundtrip",
      "input": [
        [],
        [],
        []
      ]
    },
    {
      "//": "Array of empty objects",
      "name": "array_of_empty_objects",
      "type": "roundtrip",
      "input": [
        {},
        {},
        {}
      ]
    },
    {
      "//": "Object with empty array values",
      "name": "object_with_empty_array_values",
      "type": "roundtrip",
      "input": {
        "a": [],
        "b": [],
        "c": []
      }
    },
    {
      "//": "Object with empty object values",
      "name": "object_with_empty_object_values",
      "type": "roundtrip",
      "input": {
        "a": {},
        "b": {},
        "c": {}
      }
    },
    {
      "//": "Deeply nested empty arrays",
      "name": "deeply_nested_empty_arrays",
      "type": "roundtrip",
      "input": [
        [
          [
            [
              [
                []
              ]
            ]
          ]
        ]
      ]
    },
    {
      "//": "Deeply nested empty objects",
      "name": "deeply_nested_empty_objects",
      "type": "roundtrip",
      "input": {
        "a": {
          "b": {
            "c": {
              "d": {
                "e": {}
              }
            }
          }
        }
      }
    },
    {
      "//": "Mixed empty containers",
      "name": "mixed_empty_containers",
      "type": "roundtrip",
      "input": {
        "arr": [],
        "obj": {},
        "nested": {
          "inner": []
        }
      }
    },
    {
      "//": "Alternating empty arrays and objects",
      "name": "alternating_empty_containers",
      "type": "roundtrip",
      "input": [
        {},
        [],
        {},
        [],
        {}
      ]
    },
    {
      "//": "Empty array encode verification",
      "name": "encode_empty_array",
      "type": "encode",
      "input": [],
      "expected_bytes": "fc fe"
    },
    {
      "//": "Empty object encode verification",
      "name": "encode_empty_object",
      "type": "encode",
      "input": {},
      "expected_bytes": "fd fe"
    },
    {
      "//": "Nested empty array encode verification",
      "name": "encode_nested_empty_array",
      "type": "encode",
      "input": [
        []
      ],
      "expected_bytes": "fc fc fe fe"
    },
    {
      "//": "Empty object in array encode verification (array: 1 element ‚Üí 0x04, object: 0 pairs ‚Üí 0x00)",
      "name": "encode_empty_object_in_array",
      "type": "encode",
      "input": [
        {}
      ],
      "expected_bytes": "fc fd fe fe"
    },
    {
      "//": "=== Additional container decode tests ==="
    },
    {
      "//": "Array with 3 integer elements",
      "name": "decode_array_3_ints",
      "type": "decode",
      "input_bytes": "fc 65 66 67 fe",
      "expected_value": [
        1,
        2,
        3
      ]
    },
    {
      "//": "Array with 2 integer elements",
      "name": "decode_array_2_ints",
      "type": "decode",
      "input_bytes": "fc 65 66 fe",
      "expected_value": [
        1,
        2
      ]
    },
    {
      "//": "Array with 1 integer element",
      "name": "decode_array_1_int",
      "type": "decode",
      "input_bytes": "fc 65 fe",
      "expected_value": [
        1
      ]
    },
    {
      "//": "Array with mixed value types",
      "name": "decode_array_mixed_types",
      "type": "decode",
      "input_bytes": "fc d1 61 65 cd cf fe",
      "expected_value": [
        "a",
        1,
        null,
        true
      ]
    },
    {
      "//": "Object with 2 pairs",
      "name": "decode_object_2_pairs",
      "type": "decode",
      "input_bytes": "fd d1 61 65 d1 62 66 fe",
      "expected_value": {
        "a": 1,
        "b": 2
      }
    },
    {
      "//": "Object with 3 pairs",
      "name": "decode_object_3_pairs",
      "type": "decode",
      "input_bytes": "fd d1 61 65 d1 62 66 d1 63 67 fe",
      "expected_value": {
        "a": 1,
        "b": 2,
        "c": 3
      }
    },
    {
      "//": "Object with 1 pair",
      "name": "decode_object_1_pair",
      "type": "decode",
      "input_bytes": "fd d1 61 65 fe",
      "expected_value": {
        "a": 1
      }
    },
    {
      "//": "Array of objects",
      "name": "decode_array_of_objects",
      "type": "decode",
      "input_bytes": "fc fd d1 61 65 fe fd d1 62 66 fe fe",
      "expected_value": [
        {
          "a": 1
        },
        {
          "b": 2
        }
      ]
    },
    {
      "//": "Object containing arrays",
      "name": "decode_object_of_arrays",
      "type": "decode",
      "input_bytes": "fd d1 61 fc 65 66 fe d1 62 fc 67 68 fe fe",
      "expected_value": {
        "a": [
          1,
          2
        ],
        "b": [
          3,
          4
        ]
      }
    },
    {
      "//": "=== Null values in containers ===",
      "//note": "Tests for proper handling of null values inside arrays and objects. Decoders must correctly track container element counts when processing nulls."
    },
    {
      "//": "Array containing multiple null values (2 elements)",
      "name": "array_of_nulls",
      "type": "encode",
      "input": [
        null,
        null
      ],
      "expected_bytes": "fc cd cd fe"
    },
    {
      "//": "Array with null values interspersed with other types (4 elements)",
      "name": "array_with_nulls_mixed",
      "type": "encode",
      "input": [
        1,
        null,
        2,
        null
      ],
      "expected_bytes": "fc 65 cd 66 cd fe"
    },
    {
      "//": "Object with multiple null values",
      "name": "object_with_multiple_nulls",
      "type": "roundtrip",
      "input": {
        "a": null,
        "b": null
      }
    },
    {
      "//": "Roundtrip: array of nulls",
      "name": "roundtrip_array_of_nulls",
      "type": "roundtrip",
      "input": [
        null,
        null,
        null
      ]
    },
    {
      "//": "Roundtrip: array with nulls and other values",
      "name": "roundtrip_array_nulls_mixed",
      "type": "roundtrip",
      "input": [
        1,
        null,
        "a",
        null,
        true
      ]
    },
    {
      "//": "Roundtrip: object with null values",
      "name": "roundtrip_object_with_nulls",
      "type": "roundtrip",
      "input": {
        "a": null,
        "b": 1,
        "c": null
      }
    },
    {
      "//": "Roundtrip: nested array containing nulls",
      "name": "roundtrip_nested_array_with_nulls",
      "type": "roundtrip",
      "input": [
        [
          null,
          null
        ],
        [
          null
        ]
      ]
    },
    {
      "//": "Roundtrip: object with nested null values",
      "name": "roundtrip_nested_object_with_nulls",
      "type": "roundtrip",
      "input": {
        "outer": {
          "inner": null
        },
        "also_null": null
      }
    },
    {
      "//": "Roundtrip: complex structure with nulls at various levels",
      "name": "roundtrip_complex_with_nulls",
      "type": "roundtrip",
      "input": {
        "arr": [
          null,
          {
            "nested": null
          }
        ],
        "val": null
      }
    }
  ]
}
