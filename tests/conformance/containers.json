{
  "type": "bonjson-test",
  "version": "1.0.0",
  "//": "Container (array and object) encoding tests",
  "tests": [
    {
      "//": "Array with different value types",
      "name": "array_with_string_int_null",
      "type": "encode",
      "input": [
        "a",
        1,
        null
      ],
      "expected_bytes": "b7666101b3b6"
    },
    {
      "//": "Nested empty arrays",
      "name": "array_nested_empty",
      "type": "encode",
      "input": [
        []
      ],
      "expected_bytes": "b7b7b6b6"
    },
    {
      "//": "Array with nested object",
      "name": "array_with_object",
      "type": "encode",
      "input": [
        {
          "a": 1
        }
      ],
      "expected_bytes": "b7b8666101b6b6"
    },
    {
      "//": "Object with integer value",
      "name": "object_with_int",
      "type": "encode",
      "input": {
        "a": 1
      },
      "expected_bytes": "b8666101b6"
    },
    {
      "//": "Object with negative small int value",
      "name": "object_with_neg_int",
      "type": "encode",
      "input": {
        "a": -1
      },
      "expected_bytes": "b86661acffb6"
    },
    {
      "//": "Object with larger int value",
      "name": "object_with_int16",
      "type": "encode",
      "input": {
        "a": 1000
      },
      "expected_bytes": "b86661ade803b6"
    },
    {
      "//": "Object with int64 value",
      "name": "object_with_int64",
      "type": "encode",
      "input": {
        "a": 1152921504606846976
      },
      "expected_bytes": "b86661af0000000000000010b6",
      "requires": ["int64"]
    },
    {
      "//": "Object with negative int64 value",
      "name": "object_with_neg_int64",
      "type": "encode",
      "input": {
        "a": -1152921504606846976
      },
      "expected_bytes": "b86661af00000000000000f0b6",
      "requires": ["int64"]
    },
    {
      "//": "Object with float16 value",
      "name": "object_with_float16",
      "type": "encode",
      "input": {
        "a": 1.25
      },
      "expected_bytes": "b86661b00000a03fb6"
    },
    {
      "//": "Object with float64 value",
      "name": "object_with_float64",
      "type": "encode",
      "input": {
        "a": -5.923441e-50
      },
      "expected_bytes": "b86661b1353cce818729b6b5b6"
    },
    {
      "//": "Object with string value",
      "name": "object_with_string",
      "type": "encode",
      "input": {
        "a": "b"
      },
      "expected_bytes": "b866616662b6"
    },
    {
      "//": "Object with boolean false value",
      "name": "object_with_false",
      "type": "encode",
      "input": {
        "a": false
      },
      "expected_bytes": "b86661b4b6"
    },
    {
      "//": "Object with null value",
      "name": "object_with_null",
      "type": "encode",
      "input": {
        "a": null
      },
      "expected_bytes": "b86661b3b6"
    },
    {
      "//": "Object with nested empty object value",
      "name": "object_with_nested_object",
      "type": "encode",
      "input": {
        "a": {}
      },
      "expected_bytes": "b86661b8b6b6"
    },
    {
      "//": "Object with nested empty array value",
      "name": "object_with_nested_array",
      "type": "encode",
      "input": {
        "a": []
      },
      "expected_bytes": "b86661b7b6b6"
    },
    {
      "//": "Array with multiple element types",
      "name": "array_varied_elements",
      "type": "encode",
      "input": [
        "a",
        -1,
        "z"
      ],
      "expected_bytes": "b76661acff667ab6"
    },
    {
      "//": "Array with larger integers",
      "name": "array_with_int16",
      "type": "encode",
      "input": [
        "a",
        1000,
        "z"
      ],
      "expected_bytes": "b76661ade803667ab6"
    },
    {
      "//": "Complex nested structure (roundtrip since key order is unspecified)",
      "name": "complex_nested_structure",
      "type": "roundtrip",
      "input": {
        "number": 50,
        "null": null,
        "boolean": true,
        "array": [
          "x",
          1000,
          -1.25
        ],
        "object": {
          "negative number": -100,
          "long string": "1234567890123456789012345678901234567890"
        }
      }
    },
    {
      "//": "Round-trip tests",
      "name": "roundtrip_nested_arrays",
      "type": "roundtrip",
      "input": [
        [
          1,
          2
        ],
        [
          3,
          4
        ]
      ]
    },
    {
      "name": "roundtrip_nested_objects",
      "type": "roundtrip",
      "input": {
        "outer": {
          "inner": 42
        }
      }
    },
    {
      "name": "roundtrip_mixed_nesting",
      "type": "roundtrip",
      "input": {
        "array": [
          1,
          {
            "nested": true
          }
        ],
        "value": null
      }
    },
    {
      "name": "roundtrip_deep_nesting",
      "type": "roundtrip",
      "input": {
        "a": {
          "b": {
            "c": {
              "d": {
                "e": 5
              }
            }
          }
        }
      }
    },
    {
      "//": "=== Object key edge cases ===",
      "name": "object_empty_string_key",
      "type": "roundtrip",
      "input": {
        "": 1
      }
    },
    {
      "//": "Empty string key with complex value",
      "name": "object_empty_string_key_array_value",
      "type": "roundtrip",
      "input": {
        "": [
          1,
          2,
          3
        ]
      }
    },
    {
      "//": "Long string key (16+ bytes uses long string encoding)",
      "name": "object_long_string_key",
      "type": "roundtrip",
      "input": {
        "this is a long key": 42
      }
    },
    {
      "//": "Very long key (32 bytes)",
      "name": "object_very_long_string_key",
      "type": "roundtrip",
      "input": {
        "12345678901234567890123456789012": "value"
      }
    },
    {
      "//": "Unicode object key - Japanese",
      "name": "object_unicode_key_japanese",
      "type": "roundtrip",
      "input": {
        "\u65e5\u672c\u8a9e": "Japanese"
      }
    },
    {
      "//": "Unicode object key - Emoji",
      "name": "object_unicode_key_emoji",
      "type": "roundtrip",
      "input": {
        "\ud83d\ude00": "smiley"
      }
    },
    {
      "//": "Unicode object key - Mixed",
      "name": "object_unicode_key_mixed",
      "type": "roundtrip",
      "input": {
        "Hello \u4e16\u754c \ud83c\udf0d": "mixed"
      }
    },
    {
      "//": "Multiple objects with various key types",
      "name": "object_mixed_key_types",
      "type": "roundtrip",
      "input": {
        "": 0,
        "a": 1,
        "this is a long key name": 2,
        "\u65e5\u672c": 3
      }
    },
    {
      "//": "Object key that looks like a number",
      "name": "object_numeric_string_key",
      "type": "roundtrip",
      "input": {
        "123": "numeric looking key"
      }
    },
    {
      "//": "Object key with spaces",
      "name": "object_key_with_spaces",
      "type": "roundtrip",
      "input": {
        "key with spaces": "value"
      }
    },
    {
      "//": "Nested objects with unicode keys",
      "name": "object_nested_unicode_keys",
      "type": "roundtrip",
      "input": {
        "\u65e5\u672c": {
          "\u8a9e": {
            "value": 42
          }
        }
      }
    },
    {
      "//": "=== Empty container nesting tests ===",
      "//note": "Various patterns of nested empty containers"
    },
    {
      "//": "Array of empty arrays",
      "name": "array_of_empty_arrays",
      "type": "roundtrip",
      "input": [
        [],
        [],
        []
      ]
    },
    {
      "//": "Array of empty objects",
      "name": "array_of_empty_objects",
      "type": "roundtrip",
      "input": [
        {},
        {},
        {}
      ]
    },
    {
      "//": "Object with empty array values",
      "name": "object_with_empty_array_values",
      "type": "roundtrip",
      "input": {
        "a": [],
        "b": [],
        "c": []
      }
    },
    {
      "//": "Object with empty object values",
      "name": "object_with_empty_object_values",
      "type": "roundtrip",
      "input": {
        "a": {},
        "b": {},
        "c": {}
      }
    },
    {
      "//": "Deeply nested empty arrays",
      "name": "deeply_nested_empty_arrays",
      "type": "roundtrip",
      "input": [
        [
          [
            [
              [
                []
              ]
            ]
          ]
        ]
      ]
    },
    {
      "//": "Deeply nested empty objects",
      "name": "deeply_nested_empty_objects",
      "type": "roundtrip",
      "input": {
        "a": {
          "b": {
            "c": {
              "d": {
                "e": {}
              }
            }
          }
        }
      }
    },
    {
      "//": "Mixed empty containers",
      "name": "mixed_empty_containers",
      "type": "roundtrip",
      "input": {
        "arr": [],
        "obj": {},
        "nested": {
          "inner": []
        }
      }
    },
    {
      "//": "Alternating empty arrays and objects",
      "name": "alternating_empty_containers",
      "type": "roundtrip",
      "input": [
        {},
        [],
        {},
        [],
        {}
      ]
    },
    {
      "//": "Empty array encode verification",
      "name": "encode_empty_array",
      "type": "encode",
      "input": [],
      "expected_bytes": "b7b6"
    },
    {
      "//": "Empty object encode verification",
      "name": "encode_empty_object",
      "type": "encode",
      "input": {},
      "expected_bytes": "b8b6"
    },
    {
      "//": "Nested empty array encode verification",
      "name": "encode_nested_empty_array",
      "type": "encode",
      "input": [
        []
      ],
      "expected_bytes": "b7b7b6b6"
    },
    {
      "//": "Empty object in array encode verification",
      "name": "encode_empty_object_in_array",
      "type": "encode",
      "input": [
        {}
      ],
      "expected_bytes": "b7b8b6b6"
    },
    {
      "//": "=== Basic container decode tests ==="
    },
    {
      "//": "Decode empty array",
      "name": "decode_empty_array",
      "type": "decode",
      "input_bytes": "b7b6",
      "expected_value": []
    },
    {
      "//": "Decode array with single element",
      "name": "decode_array_single_element",
      "type": "decode",
      "input_bytes": "b700b6",
      "expected_value": [
        0
      ]
    },
    {
      "//": "Decode empty object",
      "name": "decode_empty_object",
      "type": "decode",
      "input_bytes": "b8b6",
      "expected_value": {}
    },
    {
      "//": "Decode object with single key-value pair",
      "name": "decode_object_single_pair",
      "type": "decode",
      "input_bytes": "b8666100b6",
      "expected_value": {
        "a": 0
      }
    },
    {
      "//": "=== Null values in containers ===",
      "//note": "Tests for proper handling of null values inside arrays and objects. Decoders must correctly track container element counts when processing nulls."
    },
    {
      "//": "Array containing multiple null values",
      "name": "array_of_nulls",
      "type": "encode",
      "input": [
        null,
        null
      ],
      "expected_bytes": "b7b3b3b6"
    },
    {
      "//": "Array with null values interspersed with other types",
      "name": "array_with_nulls_mixed",
      "type": "encode",
      "input": [
        1,
        null,
        2,
        null
      ],
      "expected_bytes": "b701b302b3b6"
    },
    {
      "//": "Object with multiple null values",
      "name": "object_with_multiple_nulls",
      "type": "roundtrip",
      "input": {
        "a": null,
        "b": null
      }
    },
    {
      "//": "Roundtrip: array of nulls",
      "name": "roundtrip_array_of_nulls",
      "type": "roundtrip",
      "input": [
        null,
        null,
        null
      ]
    },
    {
      "//": "Roundtrip: array with nulls and other values",
      "name": "roundtrip_array_nulls_mixed",
      "type": "roundtrip",
      "input": [
        1,
        null,
        "a",
        null,
        true
      ]
    },
    {
      "//": "Roundtrip: object with null values",
      "name": "roundtrip_object_with_nulls",
      "type": "roundtrip",
      "input": {
        "a": null,
        "b": 1,
        "c": null
      }
    },
    {
      "//": "Roundtrip: nested array containing nulls",
      "name": "roundtrip_nested_array_with_nulls",
      "type": "roundtrip",
      "input": [
        [
          null,
          null
        ],
        [
          null
        ]
      ]
    },
    {
      "//": "Roundtrip: object with nested null values",
      "name": "roundtrip_nested_object_with_nulls",
      "type": "roundtrip",
      "input": {
        "outer": {
          "inner": null
        },
        "also_null": null
      }
    },
    {
      "//": "Roundtrip: complex structure with nulls at various levels",
      "name": "roundtrip_complex_with_nulls",
      "type": "roundtrip",
      "input": {
        "arr": [
          null,
          {
            "nested": null
          }
        ],
        "val": null
      }
    }
  ]
}